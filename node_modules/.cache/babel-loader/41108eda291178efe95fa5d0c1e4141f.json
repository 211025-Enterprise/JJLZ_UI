{"ast":null,"code":"'use strict';\n\nvar Registry = require('../registry');\n/**\r\n * localize: translate a string for the current locale\r\n *\r\n * @param {object} gd: the graphDiv for context\r\n *  gd._context.locale determines the language (& optional region/country)\r\n *  the dictionary for each locale may either be supplied in\r\n *  gd._context.locales or globally via Plotly.register\r\n * @param {string} s: the string to translate\r\n */\n\n\nmodule.exports = function localize(gd, s) {\n  var locale = gd._context.locale;\n  /*\r\n   * Priority of lookup:\r\n   *     contextDicts[locale],\r\n   *     registeredDicts[locale],\r\n   *     contextDicts[baseLocale], (if baseLocale is distinct)\r\n   *     registeredDicts[baseLocale]\r\n   * Return the first translation we find.\r\n   * This way if you have a regionalization you are allowed to specify\r\n   * only what's different from the base locale, everything else will\r\n   * fall back on the base.\r\n   */\n\n  for (var i = 0; i < 2; i++) {\n    var locales = gd._context.locales;\n\n    for (var j = 0; j < 2; j++) {\n      var dict = (locales[locale] || {}).dictionary;\n\n      if (dict) {\n        var out = dict[s];\n        if (out) return out;\n      }\n\n      locales = Registry.localeRegistry;\n    }\n\n    var baseLocale = locale.split('-')[0];\n    if (baseLocale === locale) break;\n    locale = baseLocale;\n  }\n\n  return s;\n};","map":null,"metadata":{},"sourceType":"script"}